<!DOCTYPE html>
<html ng-app="ml">
<head>
  <title>MinistryCloud</title>
  <link rel="stylesheet" media="all" href="/assets/application.css">
  <script type="text/javascript"
          src="//maps.googleapis.com/maps/api/js?key=AIzaSyD4oejX9bFAoV1C0PnOZcN73KRSLkYH_FQ">
  </script>
  <style>
    .angular-google-map-container { height: 700px; }
  </style>
</head>
<body ng-controller="SearchController as searchCtrl" class="ng-cloak">

  <div class="container">
    <div class="row form-group">
      <div class="col-md-12">
        <div>
          <input type="text"
                 ng-model="asyncSelected"
                 placeholder="Search..."
                 typeahead="location.name for location in searchCtrl.suggest($viewValue)"
                 typeahead-wait-ms="300"
                 typeahead-on-select="searchCtrl.selectLocation($item, $model, $label)"
                 typeahead-editable="false"
                 class="form-control">
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-4">
        <p><strong>Ministries Strategies</strong></p>
        <div class="checkbox" ng-repeat="m in searchCtrl.ministries">
          <label>
            <input type="checkbox" ng-model="searchCtrl.filterMinistries[m.name]" ng-change="searchCtrl.getMarkers()"> {{m.name}}
          </label>
        </div>
      </div>
      <div class="col-md-8">
        <ui-gmap-google-map control="searchCtrl.mapInstance" center="searchCtrl.map.center" zoom="searchCtrl.map.zoom" bounds="searchCtrl.map.bounds" events="searchCtrl.mapEvents">
          <ui-gmap-marker coords="m" idkey="m.id" ng-repeat="m in searchCtrl.markers">
            <ui-gmap-window show="false">
              <div>
                <p><strong>{{m.name}}</strong></p>
              </div>
            </ui-gmap-window>
          </ui-gmap-marker>
        </ui-gmap-google-map>
      </div>
    </div>
  </div>

  <script src="/assets/application.js"></script>
</body>
</html>
